#from USCWF and VTM
je_oregon = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_usa_manifest_destiny

	is_shown_when_inactive = {
		exists = c:USA
		exists = c:GBR
		c:USA = ROOT
		s:STATE_WASHINGTON = {
			any_scope_state = {
				owner = {
					OR = {
						c:GBR = THIS
						is_subject_of = c:GBR
					}
				}
			}
		}
		s:STATE_OREGON = {
			any_scope_state = {
				owner = {
					OR = {
						c:GBR = THIS
						is_subject_of = c:GBR
					}
				}
			}
		}
		s:STATE_IDAHO = {
			any_scope_state = {
				owner = {
					OR = {
						c:GBR = THIS
						is_subject_of = c:GBR
					}
				}
			}
		}
	}

	possible = { 
		OR = {
			has_interest_marker_in_region = region_pacific_coast
			custom_tooltip = {
				text = oregon_tt
				has_global_variable = oregon_trail_mapped
			}
			has_state_in_state_region = STATE_MONTANA
			has_state_in_state_region = STATE_WYOMING
			has_state_in_state_region = STATE_CALIFORNIA
		}
	}

	complete = {
		OR = {
			AND = {
				has_interest_marker_in_region = region_pacific_coast
				custom_tooltip = {
					text = oregon_tt
					has_global_variable = oregon_trail_mapped
				}
				OR = {
					has_state_in_state_region = STATE_MONTANA
					has_state_in_state_region = STATE_WYOMING
					has_state_in_state_region = STATE_CALIFORNIA
				}
				c:GBR = {
					relations:ROOT >= relations_threshold:cordial
				}
			}
			AND = {
				c:GBR = { relations:ROOT >= relations_threshold:amicable }
				s:STATE_CALIFORNIA = {
					any_scope_state = {
						owner = {
							has_war_with = root
						}
					}
				}
			}
			AND = {
				has_state_in_state_region = STATE_IDAHO
				has_state_in_state_region = STATE_WASHINGTON
				has_state_in_state_region = STATE_OREGON
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				s:STATE_WASHINGTON = {
					any_scope_state = {
						owner = {
							OR = {
								c:GBR = THIS
								is_subject_of = c:GBR
							}
						}
					}
				}
				s:STATE_OREGON = {
					any_scope_state = {
						owner = {
							OR = {
								c:GBR = THIS
								is_subject_of = c:GBR
							}
						}
					}
				}
				s:STATE_IDAHO = {
					any_scope_state = {
						owner = {
							OR = {
								c:GBR = THIS
								is_subject_of = c:GBR
							}
						}
					}
				}
			}
			c:GBR = { trigger_event = { id = oregon.2 } }
		}
		else = {
			s:STATE_BRITISH_COLUMBIA = {
				random_scope_state = {
					limit = {
						owner = {
							is_subject_of = c:GBR
						}
					}
					owner = {
						save_scope_as = oregon_holder_scope
					}
				}
			}
			s:STATE_IDAHO = {
				add_claim = ROOT
				remove_claim = scope:oregon_holder_scope
			}
			s:STATE_WASHINGTON = {
				add_claim = ROOT
				remove_claim = scope:oregon_holder_scope
			}
			s:STATE_OREGON = {
				add_claim = ROOT
				remove_claim = scope:oregon_holder_scope
			}
			add_modifier = {
				name = oregon_resolved
				days = normal_modifier_time
			}
		}
		if = {
			limit = { 
				has_journal_entry = usfp_manifest_destiny_main
			}
			usfp_manifest_less_destiny_high_effect = yes
		}
	}

	fail = {
		OR = {
			c:GBR = {
				relations:ROOT <= relations_threshold:poor
			}
			AND = {
				c:GBR = {
					NOR = {
						has_state_in_state_region = STATE_WASHINGTON
						has_state_in_state_region = STATE_OREGON
						has_state_in_state_region = STATE_IDAHO
					}
				}
				NOR = {
					s:STATE_WASHINGTON = {
						any_scope_state = {
							owner = {
									is_subject_of = c:GBR
							}
						}
					}
					s:STATE_OREGON = {
						any_scope_state = {
							owner = {
									is_subject_of = c:GBR
							}
						}
					}
					s:STATE_IDAHO = {
						any_scope_state = {
							owner = {
									is_subject_of = c:GBR
							}
						}
					}
				}
			}
		}
	}
	
	on_fail = {
			s:STATE_OREGON = {
				add_claim = ROOT
			}
			s:STATE_IDAHO = {
				add_claim = ROOT
			}
			s:STATE_WASHINGTON = {
				add_claim = ROOT
			}
			add_journal_entry = {
				type = je_conquer_oregon
			}
			if = {
				limit = { 
					has_journal_entry = usfp_manifest_destiny_main
				}
				usfp_manifest_more_destiny_effect = yes
			}
	}

	should_be_pinned_by_default = yes
	weight = 100
}

je_conquer_oregon = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_usa_manifest_destiny

	scripted_button = usfp_demand_bc_button 

	complete = {
		c:USA = {
			owns_entire_state_region = STATE_WASHINGTON
			owns_entire_state_region = STATE_IDAHO
			owns_entire_state_region = STATE_OREGON
		}
	}

	fail = {
		NOT = {
			has_claim = s:STATE_WASHINGTON
			has_claim = s:STATE_IDAHO
			has_claim = s:STATE_OREGON
		}
	}
	

	weight = 100
	should_be_pinned_by_default = yes
	transferable = no
}

je_oregon_can = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_historical_content

	immediate = {
		c:GBR = {
			save_scope_as = britain_scope
		}
		c:USA = {
			save_scope_as = usa_scope
		}
	}

	is_shown_when_inactive = {
		exists = c:GBR
		exists = c:USA
		is_subject_of = c:GBR
		OR = {
			has_state_in_state_region = STATE_WASHINGTON
			has_state_in_state_region = STATE_OREGON
			has_state_in_state_region = STATE_IDAHO
		}
	}

	possible = {
		c:USA = {
			OR = {
				has_journal_entry = je_oregon
				has_journal_entry = je_conquer_oregon
			}
		}
	}

	fail = {
		NOT = {
			has_state_in_state_region = STATE_WASHINGTON
			has_state_in_state_region = STATE_OREGON
			has_state_in_state_region = STATE_IDAHO
		}
	}

	complete = {
			c:USA = {
				NOT = {
					has_journal_entry = je_oregon
				}
				NOT = {
					has_claim = s:STATE_WASHINGTON
					has_claim = s:STATE_IDAHO
					has_claim = s:STATE_OREGON
				}
			}
	}
	should_be_pinned_by_default = yes
}