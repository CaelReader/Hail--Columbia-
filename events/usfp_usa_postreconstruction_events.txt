namespace = usfp_usa_postreconstruction
###### Hail, Columbia! by CaelReader ######
#The South Will Rise Again - neoconfederate movement spawns
usfp_usa_postreconstruction.1 = {
	type = country_event
	placement = scope:dixie_state

	title = usfp_usa_postreconstruction.1.t
	desc = usfp_usa_postreconstruction.1.d
	flavor = usfp_usa_postreconstruction.1.f
	dlc = dlc_usfp

	event_image = {
		video = "europenorthamerica_american_civil_war"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag_csa.dds"

	immediate = {
		sr:region_dixie = {
			random_scope_state = {
				save_scope_as = dixie_state
			}
		}
	}

	duration = 3

	trigger = {
		#event-spawned
	}

	#uh oh
	option = {
		name = usfp_usa_postreconstruction.1.a
		default_option = yes
		create_political_movement = {
			type = movement_usfp_neoconfederate
			
		}
		usfp_radicalize_dixies_in_country = {
			RADICALS = small_radicals
		}
		if = {
			limit = {
				has_variable = usfp_embraced_lost_cause
			 }
			 random_political_movement = {
				limit = {
					is_political_movement_type = movement_usfp_neoconfederate
				}
				add_modifier = {
					name = usfp_lost_cause_movement_legacy_modifier
					years = 20
				}
			 }
		}
	}
}

#Plessy v Ferguson
usfp_usa_postreconstruction.2 = {
	type = country_event
	placement = scope:jim_crow_state
	duration = 3
	cooldown = { days = never_fire_again_modifier_time } #Once

	title = usfp_usa_postreconstruction.2.t
	desc = usfp_usa_postreconstruction.2.d
	flavor = usfp_usa_postreconstruction.2.f

	dlc = dlc_usfp
	event_image = {
		video = "votp_hostile_court"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	trigger = {
		has_law = law_type:law_cultural_exclusion
		any_scope_state = {
			has_modifier = usfp_jim_crow
			any_scope_pop = {
				culture = cu:afro_american
			}
			any_scope_building = {
				OR = {
					has_active_production_method = pm_wooden_passenger_carriages
					has_active_production_method = pm_steel_passenger_carriages
				}
			}
		}
		has_technology_researched = steel_railway_cars
		has_technology_researched = identification_documents
	}

	immediate = {
		random_scope_state = {
			limit = {
				has_modifier = usfp_jim_crow
				any_scope_pop = {
					culture = cu:afro_american
				}
				any_scope_building = {
					OR = {
						has_active_production_method = pm_wooden_passenger_carriages
						has_active_production_method = pm_steel_passenger_carriages
					}
				}
			}
			save_scope_as = jim_crow_state
		}
	}

	#this is the court's decision
	option = {
		name = usfp_usa_postreconstruction.2.a
		default_option = yes
		add_radicals = {
			value = medium_radicals
			culture = cu:afro_american
		}
		je:usfp_reconstruction_long = {
			add_modifier = {
				name = usfp_separate_but_equal_modifier
			}
		}
		usfp_long_reconstruction_lose_progress = {
			VALUE = -100
		}
		scope:jim_crow_state = {
			usfp_loyalize_dixies_in_state = {
				LOYALISTS = medium_radicals
			}
		}
		add_radicals = {
			value = medium_radicals
			culture = cu:afro_american
		}
		every_political_movement = {
			limit = {
				usfp_movement_is_racist = yes
			}
			add_modifier = {
				name = usfp_movement_mollified_by_racism_modifier
				years = 5
			}
		}
	}

	#we need to work to overturn this
	option = {
		name = usfp_usa_postreconstruction.2.b
		default_option = yes
		add_radicals = {
			value = medium_radicals
			culture = cu:afro_american
		}
		je:usfp_reconstruction_long = {
			add_modifier = {
				name = usfp_separate_but_equal_modifier
			}
		}
		usfp_long_reconstruction_lose_progress = {
			VALUE = -100
		}
		scope:jim_crow_state = {
			usfp_loyalize_dixies_in_state = {
				LOYALISTS = small_radicals
			}
		}
		add_radicals = {
			value = small_radicals
			culture = cu:afro_american
		}
		every_political_movement = {
			limit = {
				culture ?= cu:afro_american
			}
			add_modifier = {
				name = usfp_movement_agitated_by_racism_modifier
				years = 5
			}
		}
	}
}
#Wilmington massacre
usfp_usa_postreconstruction.3 = {
	type = country_event
	placement = scope:wilmington_state
	duration = 3
	cooldown = { days = never_fire_again_modifier_time } #Once

	title = usfp_usa_postreconstruction.3.t
	desc = usfp_usa_postreconstruction.3.d
	flavor = usfp_usa_postreconstruction.3.f

	dlc = dlc_usfp
	event_image = {
		video = "unspecific_vandalized_storefront"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		usfp_is_afro_american_discriminated = no
		any_scope_state = {
			region = sr:region_dixie
			OR = {
				radical_fraction = {
					value > 0.15
					culture = cu:dixie
				}
				radical_fraction = {
					value > 0.15
					culture = cu:usfp_american
				}
			}
			culture_percent_state = {
				target = cu:afro_american
				value > 0.10
			}
		}
	}

	immediate = {
		if = {
			limit = {
				any_scope_state = {
					state_region = s:STATE_NORTH_CAROLINA
					OR = {
						radical_fraction = {
							value > 0.15
							culture = cu:dixie
						}
						radical_fraction = {
							value > 0.15
							culture = cu:usfp_american
						}
					}
				}
			 }
			s:STATE_NORTH_CAROLINA.region_state:USA = {
				save_scope_as = wilmington_state
			}
		} else = {
			ordered_scope_state = {
				limit = {
					region = sr:region_dixie
					OR = {
						radical_fraction = {
							value > 0.15
							culture = cu:dixie
						}
						radical_fraction = {
							value > 0.15
							culture = cu:usfp_american
						}
					}
					culture_percent_state = {
						target = cu:afro_american
						value > 0.10
					}
				}
				order_by = radical_population_fraction
				save_scope_as = wilmington_state
			}
		}

	}

	#this is the state's issue
	option = {
		name = usfp_usa_postreconstruction.3.a
		default_option = yes
		scope:wilmington_state = {
			kill_population_percent_in_state = {
				percent = 0.0005
				culture = cu:afro_american
			}
			add_radicals = {
				value = medium_radicals
				culture = cu:afro_american
			}
			usfp_loyalize_dixies_in_state = {
				LOYALISTS = small_radicals
			}
			if = {
				limit = {
					NOT = {
						has_modifier = usfp_jim_crow
					}
				 }
				 add_modifier = usfp_jim_crow
			}
			add_modifier = {
				name = usfp_white_state_government_modifier
				years = 40
			}
		}
	}

	#intervene
	option = {
		name = usfp_usa_postreconstruction.3.b
		scope:wilmington_state = {
			kill_population_percent_in_state = {
				percent = 0.0005
				culture = cu:afro_american
			}
			add_radicals = {
				value = small_radicals
				culture = cu:afro_american
			}
			usfp_radicalize_dixies_in_state = {
				LOYALISTS = large_radicals
			}
		}
		if = {
			limit = {
				any_political_movement = {
					usfp_movement_is_racist = yes
				}
			 }
			 ordered_political_movement = {
				limit = {
					usfp_movement_is_racist = yes
				}
				order_by = political_movement_support
				add_modifier = {
					name = usfp_movement_agitated_by_antiracism_modifier
					years = 5
				}
			 }
		}
	}

	#Radical Reconstruction
	option = {
		name = usfp_usa_postreconstruction.3.b
		highlighted_option = yes
		trigger = {
			custom_tooltip = {
				text = usfp_reconstruction_outcome_radical
				has_global_variable = usfp_reconstruction_outcome_radical
			}
		}
		scope:wilmington_state = {
			kill_population_percent_in_state = {
				percent = 0.0005
				culture = cu:afro_american
			}
			usfp_radicalize_dixies_in_state = {
				LOYALISTS = large_radicals
			}
		}
		if = {
			limit = { 
				any_political_movement = {
					culture ?= cu:afro_american
				}
			}
			random_political_movement = {
				limit = {
					culture ?= cu:afro_american
				}
				add_modifier = {
					name = usfp_mollified_by_antiracism_modifier
					years = 5
				}
			}
		}
		if = {
			limit = {
				any_political_movement = {
					usfp_movement_is_racist = yes
				}
			 }
			 ordered_political_movement = {
				limit = {
					usfp_movement_is_racist = yes
				}
				order_by = political_movement_support
				add_modifier = {
					name = usfp_movement_agitated_by_antiracism_modifier
					years = 5
				}
			 }
		}
	}
}
#NAACP Founded
usfp_usa_postreconstruction.4 = {
	type = country_event
	placement = scope:maryland_scope
	duration = 3
	cooldown = { days = never_fire_again_modifier_time } #Once

	title = usfp_usa_postreconstruction.4.t
	desc = usfp_usa_postreconstruction.4.d
	flavor = usfp_usa_postreconstruction.4.f

	dlc = dlc_usfp
	event_image = {
		video = "southamerica_election"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/invention_icons/international_diplomacy.dds"

	trigger = {
		OR = {
			year >= 1909
			je:usfp_reconstruction_long ?= {
				"scripted_bar_progress(usfp_long_reconstruction_progress_bar)" >= 1500
			}
		}
		any_political_movement = {
			culture ?= cu:afro_american
		}
	}

	immediate = {
		s:STATE_MARYLAND.region_state:USA = {
			save_scope_as = maryland_scope
		}
	}

	#a positive development
	option = {
		name = usfp_usa_postreconstruction.4.a
		default_option = yes
		random_political_movement = {
			limit = {
				culture ?= cu:afro_american
			}
			add_modifier = usfp_naacp_movement_modifier
		}
		usfp_long_reconstruction_add_progress = {
			VALUE = 50
		}
		#1.10: increase afro-american fervor
	}

	#socialists!
	option = {
		name = usfp_usa_postreconstruction.4.b
		random_political_movement = {
			limit = {
				culture ?= cu:afro_american
			}
			add_modifier = {
				name = usfp_naacp_movement_modifier
				multiplier = 0.5
			}
		}
		add_radicals = {
			value = small_radicals
			culture = cu:afro_american
		}
		add_loyalists = {
			value = small_radicals
			interest_group = ig:ig_petty_bourgeoisie
		}
	}
}
#Great Migration
usfp_usa_postreconstruction.5 = {
	type = country_event
	placement = scope:great_migration_exit_state
	duration = 3
	cooldown = { days = never_fire_again_modifier_time } #Once

	title = usfp_usa_postreconstruction.5.t
	desc = usfp_usa_postreconstruction.5.d
	flavor = usfp_usa_postreconstruction.5.f

	dlc = dlc_usfp
	event_image = {
		video = "asia_poor_people_moving"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	trigger = {
		any_scope_state = {
			has_modifier = usfp_jim_crow
			culture_percent_state = {
				target = cu:afro_american
				value > 10
			}
		}
		year >= 1910
		NOT = {
			has_global_variable = usfp_reconstruction_outcome_radical
		}
	}

	immediate = {
		random_scope_state = {
			limit = {
				has_modifier = usfp_jim_crow
				culture_percent_state = {
					target = cu:afro_american
					value > 10
				}
			}
			save_scope_as = great_migration_exit_state
		}
		random_scope_state = {
			limit = {
				state_is_eligible_as_mass_migration_target = yes
				OR = {
					state_region = s:STATE_NEW_YORK
					state_region = s:STATE_MARYLAND
					state_region = s:STATE_PENNSYLVANIA
				}
			}
			save_scope_as = great_migration_state_1
		}
		random_scope_state = {
			limit = {
				state_is_eligible_as_mass_migration_target = yes
				OR = {
					state_region = s:STATE_MICHIGAN
					state_region = s:STATE_ILLINOIS
					state_region = s:STATE_OHIO
				}
			}
			save_scope_as = great_migration_state_2
		}
	}

	#it's only fair
	option = {
		name = usfp_usa_postreconstruction.5.a
		default_option = yes
		scope:great_migration_exit_state = {
			ordered_scope_pop = {
				limit = {
					culture = cu:afro_american
				}
				order_by = total_size
				move_partial_pop = {
					state = scope:great_migration_state_1
					population_ratio = 0.01
				}
			}
			ordered_scope_pop = {
				limit = {
					culture = cu:afro_american
				}
				order_by = total_size
				move_partial_pop = {
					state = scope:great_migration_state_2
					population_ratio = 0.01
				}
			}
		}
		scope:great_migration_state_1 = {
			create_mass_migration = {
				origin = root
				culture = cu:afro_american
			}
		}
		scope:great_migration_state_2 = {
			create_mass_migration = {
				origin = root
				culture = cu:afro_american
			}
		}
	}
}
#Johnson–Jeffries riots
usfp_usa_postreconstruction.6 = {
	type = country_event
	placement = scope:boxing_state
	duration = 3
	cooldown = { days = never_fire_again_modifier_time } #Once

	title = usfp_usa_postreconstruction.6.t
	desc = usfp_usa_postreconstruction.6.d
	flavor = usfp_usa_postreconstruction.6.f

	dlc = dlc_usfp
	event_image = {
		video = "unspecific_vandalized_storefront"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		game_date >= 1910.7.1
		has_technology_researched = film
		has_technology_researched = mass_communication
	}

	immediate = {
		s:STATE_NEVADA.region_state:USA = {
			save_scope_as = boxing_state
		}
		ordered_scope_state = {
			order_by = total_urbanization
			position = 7
			save_scope_as = urbanization_state
		}
	}

	#what the fuck
	option = {
		name = usfp_usa_postreconstruction.6.a
		default_option = yes
		every_scope_state = {
			limit = {
				total_urbanization >= scope:urbanization_state.total_urbanization
				any_scope_culture = {
					has_discrimination_trait = african_heritage
				}
			}
			state_region = {
				add_devastation = 5
			}
		}
		every_political_movement = {
			limit = {
				usfp_movement_is_racist = yes
			}
			add_modifier = {
				name = usfp_great_white_hope_movement_modifier
				years = 2
			}
		}
		add_modifier = {
			name = usfp_countrywide_anti_black_violence_modifier
			months = 6
		}
		usfp_long_reconstruction_lose_progress = {
			VALUE = 50
		}
	}

	#restore order
	option = {
		name = usfp_usa_postreconstruction.6.b
		trigger = {
			OR = {
				has_law = law_type:law_dedicated_police
				has_law = law_type:law_militarized_police
				has_law = law_type:law_national_guard
			}
			OR = {
				institution_investment_level = {
					institution = institution_home_affairs
					value >= 4
				}
				institution_investment_level = {
					institution = institution_police
					value >= 5
				}
			}
		}
		highlighted_option = yes
		show_as_unavailable = {
			always = yes
		}
		every_scope_state = {
			limit = {
				total_urbanization >= scope:urbanization_state.total_urbanization
			}
			state_region = {
				add_devastation = 2
			}
			usfp_radicalize_whites_in_state = {
				RADICALS = small_radicals
			}
		}
		usfp_radicalize_whites_in_country = {
			RADICALS = small_radicals
		}
	}
}
#Red Summer
usfp_usa_postreconstruction.7 = {
	type = country_event
	placement = scope:red_summer_start_state
	duration = 3
	cooldown = { days = never_fire_again_modifier_time } #Once

	title = usfp_usa_postreconstruction.7.t
	desc = usfp_usa_postreconstruction.7.d
	flavor = usfp_usa_postreconstruction.7.f

	dlc = dlc_usfp
	event_image = {
		video = "unspecific_vandalized_storefront"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		month >= 6
		month <= 8
		year >= 1919
		any_political_movement = {
			OR = {
				is_political_movement_type = movement_anarchist
				is_political_movement_type = movement_labor
				is_political_movement_type = movement_socialist
				is_political_movement_type = movement_communist
			}
		}
		any_scope_pop = {
			is_pop_type = soldiers
			culture = cu:afro_american
		}
		has_variable = recently_had_war
	}

	immediate = {
		ordered_political_movement = {
			limit = {
				OR = {
					is_political_movement_type = movement_anarchist
					is_political_movement_type = movement_labor
					is_political_movement_type = movement_socialist
					is_political_movement_type = movement_communist
				}
			}
			order_by = political_movement_support
			save_scope_as = scapegoat_movement
		}
		random_scope_state = {
			limit = {
				any_scope_pop = {
					is_pop_type = soldiers
					culture = cu:afro_american	
				}
				is_incorporated = yes
			}
			save_scope_as = red_summer_start_state
			add_to_list = red_summer_states
		}
		s:STATE_ILLINOIS = {
			region_state:USA = {
				add_to_list = red_summer_states
			}
		}
		while = {
			count = 7
			random_scope_state = {
				limit = {
					NOT = {
						is_in_list = red_summer_states
					}
					usfp_is_valid_antiblack_riot_state = yes
				}
				add_to_list = red_summer_states
			}
		}
	}

	#socialists!!
	option = {
		name = usfp_usa_postreconstruction.7.a
		default_option = yes
		every_scope_state = {
			limit = {
				is_in_list = red_summer_states
			}
			add_radicals_in_state = {
				value = medium_radicals
				culture = cu:afro_american
			}
			usfp_loyalize_whites_in_state = {
				LOYALISTS = small_radicals
			}
			state_region = {
				add_devastation = 4
			}
		}
		scope:scapegoat_movement = {
			add_modifier = {
				name = usfp_racist_scapegoating_movement_modifier
				years = 3
			}
		}
		random_political_movement = {
			limit = {
				culture ?= cu:afro_american
			}
			add_modifier = {
				name = usfp_racist_scapegoating_movement_modifier
				years = 3
			}
		}
		add_modifier = {
			name = usfp_countrywide_anti_black_violence_modifier
			months = 6
		}
		usfp_long_reconstruction_lose_progress = {
			VALUE = -50
		}
	}

	#restore order
	option = {
		name = usfp_usa_postreconstruction.7.b
		trigger = {
			OR = {
				has_law = law_type:law_dedicated_police
				has_law = law_type:law_militarized_police
				has_law = law_type:law_national_guard
			}
			OR = {
				institution_investment_level = {
					institution = institution_home_affairs
					value >= 4
				}
				institution_investment_level = {
					institution = institution_police
					value >= 5
				}
			}
		}
		highlighted_option = yes
		show_as_unavailable = {
			always = yes
		}
		every_scope_state = {
			limit = {
				is_in_list = red_summer_states
			}
			state_region = {
				add_devastation = 2
			}
			usfp_radicalize_whites_in_state = {
				RADICALS = small_radicals
			}
		}
		usfp_radicalize_whites_in_country = {
			RADICALS = small_radicals
		}
		ordered_political_movement = {
			limit = {
				usfp_movement_is_racist = yes
			}
			order_by = political_movement_support
			add_modifier = {
				name = usfp_movement_agitated_by_antiracism_modifier
				years = 3
			}
		}
		usfp_long_reconstruction_lose_progress = {
			VALUE = -50
		}
	}
}
#Generic Race Riot
usfp_usa_postreconstruction.8 = {
	type = country_event
	placement = scope:riot_state
	duration = 3
	cooldown = { years = 10 }

	title = usfp_usa_postreconstruction.8.t
	desc = usfp_usa_postreconstruction.8.d
	flavor = usfp_usa_postreconstruction.8.f

	dlc = dlc_usfp
	event_image = {
		video = "unspecific_vandalized_storefront"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		is_at_war = no
		any_scope_state = {
			usfp_is_valid_antiblack_riot_state = yes
		}
	}

	immediate = {
		random_scope_state = {
			limit = {
				usfp_is_valid_antiblack_riot_state = yes
			}
			save_scope_as = riot_state
		}
	}

	#this is the state's problem
	option = {
		name = usfp_usa_postreconstruction.8.a
		default_option = yes
		scope:riot_state = {
			add_radicals_in_state = {
				value = small_radicals
				culture = cu:afro_american
			}
			usfp_loyalize_whites_in_state = {
				LOYALISTS = small_radicals
			}
			add_modifier = {
				name = usfp_state_race_riot_aftermath_modifier
				years = 2
			}
		}
		random_political_movement = {
			limit = {
				culture ?= cu:afro_american
			}
			add_modifier = {
				name = usfp_safety_in_numbers_movement_modifier
				years = 2
			}
		}
	}

	#federalize the guard!
	option = {
		name = usfp_usa_postreconstruction.8.b
		trigger = {
			OR = {
				has_law = law_type:law_dedicated_police
				has_law = law_type:law_militarized_police
				has_law = law_type:law_national_guard
			}
			OR = {
				institution_investment_level = {
					institution = institution_home_affairs
					value >= 3
				}
				institution_investment_level = {
					institution = institution_police
					value >= 4
				}
			}
		}
		highlighted_option = yes
		show_as_unavailable = {
			always = yes
		}
		scope:riot_state = {
			usfp_radicalize_whites_in_state = {
				RADICALS = small_radicals
			}
			add_loyalists_in_state = {
				value = medium_radicals
				culture = cu:afro_american
			}
		}
		usfp_radicalize_whites_in_country = {
			RADICALS = small_radicals
		}
		if = {
			limit = { 
				any_political_movement = {
					usfp_movement_is_racist = yes
					political_movement_radicalism >= 50
				}
			}
			ordered_political_movement = {
				limit = {
					usfp_movement_is_racist = yes
				}
				order_by = political_movement_radicalism
				add_modifier = {
					name = usfp_movement_agitated_by_antiracism_modifier
					years = 2
				}
			}
		}
	}
}
#Harlem Renaissance
#Black Wall Street spawns
#Tulsa massacre
#Birth of a Nation
#Radical Reconstruction: Southern Renaissance
#Radical Reconstruction: Great Return
#Radical Reconstruction: Neoconfederate Assassination
#Exodusters
#Silent Parade
#Radical Reconstruction: Dixie Redoubt
#Back to Africa?