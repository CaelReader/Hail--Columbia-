namespace = usfp_manifest_destiny

#startup event, introducing Manifest Destiny
usfp_manifest_destiny.1 = {
	type = country_event
	placement = ROOT

	event_image = {
		video = "europenorthamerica_gold_prospectors"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag_usa.dds"
	
	title = usfp_manifest_destiny.1.t
	desc = usfp_manifest_destiny.1.d
	flavor = usfp_manifest_destiny.1.f
	dlc = dlc_usfp
	duration = 3

	#yes good
	option = {
		name = usfp_manifest_destiny.1.a
		default_option = yes
		usfp_manifest_more_destiny_effect = yes
	}

	#no bad
	option = {
		name = usfp_manifest_destiny.1.b
	}
}

## Texas calls for aid!
usfp_manifest_destiny.2 = {
	type = country_event
	placement = s:STATE_TEXAS.region_state:MEX

	event_image = {
		video = "rp1_social_banditry"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	title = usfp_manifest_destiny.2.t
	desc = usfp_manifest_destiny.2.d
	flavor = usfp_manifest_destiny.2.f
	dlc = dlc_usfp
	duration = 3

	immediate = {
		s:STATE_TEXAS = {
			save_scope_as = texas_scope
		}
		cu:dixie = {
			save_scope_as = dixie_culture
		}
		c:MEX = {
			save_scope_as = mexico_scope
		}
		set_variable = texas_called_for_aid
	}

	trigger = {
		NOT = {
			exists = c:TEX
			has_war_with = c:MEX
		}
		NOT = {
			has_variable = texas_called_for_aid
		}
		s:STATE_TEXAS = {
			any_scope_state = {
				owner = c:MEX
				any_scope_pop = {
					culture = cu:dixie
				}
			}
		}
	}

	#we shall support Texas
	option = {
		name = usfp_manifest_destiny.2.a
		default_option = yes
		usfp_manifest_more_destiny_effect = yes
		s:STATE_TEXAS = {
			add_claim = c:USA
		}
		create_incident = {
			country = c:USA
			value = 5
		}
	}

	#we do not want to antagonize Mexico
	option = {
		name = usfp_manifest_destiny.2.b
		ig:ig_landowners = {
			add_modifier = {
				name = usfp_manifest_destiny_refused_texas
				years = 2
			}
		}
		ig:ig_rural_folk = {
			add_modifier = {
				name = usfp_manifest_destiny_refused_texas
				years = 2
			}
		}
		s:STATE_LOUISIANA.region_state:USA = {
			add_radicals_in_state = {
				value = 0.01
				culture = cu:dixie
			}
		}
	}
}



## MEX: Mexican Purchase offer
usfp_manifest_destiny.3 = {
	type = country_event
	placement = ROOT

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	title = usfp_manifest_destiny.3.t
	desc = usfp_manifest_destiny.3.d
	flavor = usfp_manifest_destiny.3.f
	dlc = dlc_usfp
	duration = 3

	immediate = {
		c:USA = {
			save_scope_as = usa_scope
		}
	}


	#accept
	option = {
		name = usfp_manifest_destiny.3.a
		ai_chance = {
			base = 5
			modifier = {
				trigger = {
					taking_loans = yes
				}
				add = 10
			}
			modifier = {
				trigger = {
					OR = {
						in_default = yes
						has_modifier = declared_bankruptcy
					}
				}
				add = 100
			}
		}
		c:USA = {
			change_relations = {
				country = ROOT
				value = 25
			}
			trigger_event = {
				id = usfp_manifest_destiny.5
				days = 7
				popup = yes
			}
		}
		show_as_tooltip = {
			add_modifier = {
				name = usa_paying_for_mexico
				years = 4
			}
			c:MEX = {
				add_modifier = {
					name = mexico_getting_paid_by_usa
					years = 4
				}
			}
			usfp_mexican_north_purchase_effect = yes
		}
	}

	#refuse
	option = {
		name = usfp_manifest_destiny.3.b
		default_option = yes
		ai_chance = {
			base = 95
		}
		c:USA = {
			change_relations = {
				country = ROOT
				value = -10
			}
			trigger_event = {
				id = usfp_manifest_destiny.4
				days = 7
			}
		}
	}
}

## Mexican Purchase refused
usfp_manifest_destiny.4 = {
	type = country_event
	placement = ROOT

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag_mexico.dds"
	
	title = usfp_manifest_destiny.4.t
	desc = usfp_manifest_destiny.4.d
	flavor = usfp_manifest_destiny.4.f
	dlc = dlc_usfp
	duration = 3

	immediate = {
		c:MEX = {
			save_scope_as = mexico_scope
		}
	}

	#we will try again later
	option = {
		name = usfp_manifest_destiny.4.a
		default_option = yes
	}

	#MANIFEST DESTINY
	option = {
		name = usfp_manifest_destiny.4.b
		trigger = {
			custom_tooltip = {
				text = enough_manifest_destiny
				root.var:manifest_destiny_var > 2
			}
		}
		highlighted_option = yes
		s:STATE_CALIFORNIA = {
			add_claim = c:USA
		}
		s:STATE_NEVADA = {
			add_claim = c:USA
		}
		s:STATE_UTAH = {
			add_claim = c:USA
		}
		s:STATE_ARIZONA = {
			add_claim = c:USA
		}
		s:STATE_NEW_MEXICO = {
			add_claim = c:USA
		}
		s:STATE_TEXAS = {
			add_claim = c:USA
		}
		custom_tooltip = treaty_of_guadalupe
	}
}


## Mexican Purchase accepted
usfp_manifest_destiny.5 = {
	type = country_event
	placement = ROOT

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag_mexico.dds"
	
	title = usfp_manifest_destiny.5.t
	desc = usfp_manifest_destiny.5.d
	flavor = usfp_manifest_destiny.5.f
	dlc = dlc_usfp
	duration = 3

	immediate = {
		c:MEX = {
			save_scope_as = mexico_scope
		}
	}

	#excellent
	option = {
		name = usfp_manifest_destiny.5.a
		default_option = yes
		usfp_manifest_less_destiny_effect = yes
		add_modifier = {
			name = usa_paying_for_mexico
			years = 4
		}
		c:MEX = {
			add_modifier = {
				name = mexico_getting_paid_by_usa
				years = 4
			}
		}
		usfp_mexican_north_purchase_effect = yes
	}

}

#Treaty of Guadalupe Hidalgo
usfp_manifest_destiny.6 = {
	type = country_event
	placement = scope:mexico_capital_scope

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag_mexico.dds"
	
	title = usfp_manifest_destiny.6.t
	desc = usfp_manifest_destiny.6.d
	flavor = usfp_manifest_destiny.6.f
	dlc = dlc_usfp
	duration = 3

	trigger = {
		has_war_with = c:MEX
		c:MEX = {
			capital = {
				controller = c:USA
			}
		}
		NOT = {
			has_variable = g_h_treaty_var
		}
	}
	

	immediate = {
		c:MEX = {
			save_scope_as = mexico_scope
			capital = {
				save_scope_as = mexico_capital_scope
			}
		}
		set_variable = g_h_treaty_var
	}

	cancellation_trigger = {
		NOT = {
			exists = c:MEX
		}
	}

	#Standard Mexican Cession, with payment
	option = {
		name = usfp_manifest_destiny.6.a
		default_option = yes
		usfp_manifest_less_destiny_effect = yes
		add_modifier = {
			name = usa_paying_for_mexico
			years = 4
			multiplier = 0.5
		}
		c:MEX = {
			add_modifier = {
				name = mexico_getting_paid_by_usa
				years = 4
				multiplier = 0.5
			}
		}
		every_diplomatic_play = {
			limit = {
				initiator_is = c:USA
				target_is = c:MEX
			}
			resolve_play_for = initiator
		}
		usfp_mexican_north_purchase_effect = yes

	}
	
	#We will not take additional territory
	option = {
		name = usfp_manifest_destiny.6.b
		trigger = {
			root.var:manifest_destiny_var <= 2
		}
		every_diplomatic_play = {
			limit = {
				initiator_is = c:USA
				target_is = c:MEX
			}
			resolve_play_for = initiator
		}
	}

	#Take the northern part of Mexico too
	option = {
		name = usfp_manifest_destiny.6.c
		trigger = {
			custom_tooltip = {
				text = enough_manifest_destiny
				root.var:manifest_destiny_var >= 5
			}
		}
		every_diplomatic_play = {
			limit = {
				initiator_is = c:USA
				target_is = c:MEX
			}
			resolve_play_for = initiator
		}
		usfp_mexican_north_purchase_effect = yes
		s:STATE_BAJA_CALIFORNIA.region_state:MEX = {
			set_state_owner = root
		}
		s:STATE_SONORA.region_state:MEX = {
			set_state_owner = root
		}
		s:STATE_CHIHUAHUA.region_state:MEX = {
			set_state_owner = root
		}
		s:STATE_RIO_GRANDE.region_state:MEX = {
			set_state_owner = root
		}
		create_incident = {
			country = c:MEX
			value = 30
		}
		highlighted_option = yes
	}

	#Take the northern part of Mexico, and turn Mexico into a dominion
	option = {
		name = usfp_manifest_destiny.6.e
		trigger = {
			root.var:manifest_destiny_var >= 6
		}
		usfp_manifest_more_destiny_effect = yes
		every_diplomatic_play = {
			limit = {
				initiator_is = c:USA
				target_is = c:MEX
			}
			resolve_play_for = initiator
		}
		usfp_mexican_north_purchase_effect = yes
		s:STATE_BAJA_CALIFORNIA.region_state:MEX = {
			set_state_owner = root
		}
		s:STATE_SONORA.region_state:MEX = {
			set_state_owner = root
		}
		s:STATE_CHIHUAHUA.region_state:MEX = {
			set_state_owner = root
		}
		s:STATE_RIO_GRANDE.region_state:MEX = {
			set_state_owner = root
		}
		create_diplomatic_pact = {
			country = c:MEX
			type = dominion
		}
		create_incident = {
			country = c:MEX
			value = 40
		}
		highlighted_option = yes
	}

	#ALL OF MEXICO
	option = {
		name = usfp_manifest_destiny.6.g
		trigger = {
			custom_tooltip = {
				text = enough_manifest_destiny
				root.var:manifest_destiny_var >= 7
			}
		}
		usfp_manifest_more_destiny_effect = yes
		usfp_mexican_north_purchase_effect = yes
		annex = c:MEX
		create_incident = {
			country = c:MEX
			value = 60
		}
		highlighted_option = yes
	}

}

#PB embrace Empire of Liberty
usfp_manifest_destiny.7 = {
	type = country_event
	placement = ROOT

	event_image = {
		video = "europenorthamerica_london_center"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	title = usfp_manifest_destiny.7.t
	desc = usfp_manifest_destiny.7.d
	flavor = usfp_manifest_destiny.7.f
	dlc = dlc_usfp
	duration = 3

	trigger = {
		ig:ig_petty_bourgeoisie = {
			NOT = {
				has_ideology = ideology:ideology_empire_of_liberty
			}
		}
		root.var:manifest_destiny_var >= 4
	}

	immediate = {
		ig:ig_petty_bourgeoisie = {
			save_scope_as = pb_ig
		}
	}

	option = {
		name = usfp_manifest_destiny.7.a
		default_option = yes
		ai_chance = {
			base = 100
		}
		ig:ig_petty_bourgeoisie = {
			add_ideology = ideology_empire_of_liberty
		}
	}

	option = {
		name = usfp_manifest_destiny.7.b
		trigger = {
			ig:ig_landowners = {
				is_in_government = no
			}
		}
		ai_chance = {
			base = 0
		}
		ig:ig_petty_bourgeoisie = {
			add_ideology = ideology_empire_of_liberty
		}
		usfp_manifest_less_destiny_effect = yes
		add_radicals = {
			value = small_radicals
			interest_group = ig:ig_petty_bourgeoisie
		}
	}
}

#Gunboat Diplomacy
usfp_manifest_destiny.8 = {
	type = country_event
	placement = ROOT

	event_image = {
		video = "votp_gunboat_diplomacy"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	title = usfp_manifest_destiny.8.t
	desc = usfp_manifest_destiny.8.d
	flavor = usfp_manifest_destiny.8.f
	dlc = dlc_usfp
	duration = 3

	trigger = {
		NOT = {
			has_variable = had_gunboat_diplomacy
		}
		root.var:manifest_destiny_var >= 4
		OR = {
			any_diplomatic_play = {
				initiator = root
				OR = {
					has_play_goal = open_market
					has_play_goal = make_protectorate
					has_play_goal = ban_slavery
				}
			}
			ruler = {
				has_variable = is_theodore_roosevelt
			}
		}
		naval_power_projection >= 80
		ig:ig_armed_forces = {
			is_marginal = no
		}
	}

	immediate = {
		set_variable = had_gunboat_diplomacy
		ig:ig_armed_forces = {
			save_scope_as = armed_forces_scope
		}
	}

	option = {
		name = usfp_manifest_destiny.8.a
		default_option = yes
		ig:ig_armed_forces = {
			set_ig_trait = ig_trait:usfp_ig_trait_gunboat_diplomacy
		}
	}

	option = {
		name = usfp_manifest_destiny.8.b
		add_radicals = {
			value = small_radicals
			interest_group = ig:ig_armed_forces
		}
	}
}

#Railroad Tycoons
usfp_manifest_destiny.9 = {
	type = country_event
	placement = scope:rail_state_scope

	title = usfp_manifest_destiny.9.t
	desc = usfp_manifest_destiny.9.d
	flavor = usfp_manifest_destiny.9.f
	dlc = dlc_usfp
	event_image = {
		video = "unspecific_trains"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/invention_icons/railways.dds"

	duration = 3

	trigger = {
		NOT = {
			has_variable = had_railroad_tycoons
		}
		root.var:manifest_destiny_var >= 1
		has_technology_researched = railways
		#railroads to the west!
		any_scope_state = {
			OR = {
				state_region = s:STATE_CALIFORNIA
				state_region = s:STATE_WASHINGTON
				state_region = s:STATE_OREGON
			}
		}
		#need some connection opportunities
		OR = {
			#Southern Route
			AND = {
				any_scope_state = {
					state_region = s:STATE_ARIZONA
				}
				any_scope_state = {
					state_region = s:STATE_NEW_MEXICO
				}
				any_scope_state = {
					state_region = s:STATE_TEXAS
				}
				any_scope_state = {
					state_region = s:STATE_LOUISIANA
				}
			}
			#Central Route
			AND = {
				any_scope_state = {
					state_region = s:STATE_NEVADA
				}
				any_scope_state = {
					state_region = s:STATE_UTAH
				}
				any_scope_state = {
					state_region = s:STATE_WYOMING
				}
				any_scope_state = {
					state_region = s:STATE_NEBRASKA
				}
				any_scope_state = {
					state_region = s:STATE_IOWA
				}
			}
			#Northern Route
			AND = {
				any_scope_state = {
					state_region = s:STATE_IDAHO
				}
				any_scope_state = {
					state_region = s:STATE_MONTANA
				}
				any_scope_state = {
					state_region = s:STATE_NORTH_DAKOTA
				}
				any_scope_state = {
					state_region = s:STATE_MINNESOTA
				}
			}
		}
		#need trains to build trains
		any_scope_building = {
			is_building_type = building_railway
			count > 10
		}
		ig:ig_industrialists = {
			is_marginal = no
		}
	}

	immediate = {
		set_variable = had_railroad_tycoons
		random_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_MINNESOTA
					state_region = s:STATE_IOWA
					state_region = s:STATE_LOUISIANA
					state_region = s:STATE_NEBRASKA
					state_region = s:STATE_WYOMING
				}
			}
			save_scope_as = rail_state_scope
		}
		ig:ig_industrialists = {
			save_scope_as = industrialists_scope
		}
		random_scope_building = {
			limit = {
				is_building_type = building_railway
			}
			save_scope_as = railway_scope
		}
	}

	#I like trains
	option = {
		name = usfp_manifest_destiny.9.a
		default_option = yes
		ig:ig_industrialists = {
			set_ig_trait = ig_trait:usfp_ig_trait_rail_tycoons
		}
	}

	#I hate trains
	option = {
		name = usfp_manifest_destiny.9.b
		add_radicals = {
			value = small_radicals
			interest_group = ig:ig_industrialists
		}
	}
}

#California Gold Mountain
usfp_manifest_destiny.10 = {
	type = country_event
	placement = scope:california_scope

	event_image = {
		video = "europenorthamerica_gold_prospectors"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/invention_icons/prospecting_tech.dds"
	
	title = usfp_manifest_destiny.10.t
	desc = usfp_manifest_destiny.10.d
	flavor = usfp_manifest_destiny.10.f
	dlc = dlc_usfp
	duration = 3

	trigger = {
		any_scope_state = {
			state_region = s:STATE_CALIFORNIA
			any_scope_building = {
				is_building_type = building_gold_fields
			}
		}
		has_law = law_type:law_no_migration_controls
		NOT = {
			has_global_variable = usfp_gold_mountain
		}
		game_date > 1851.1.1
	}
	immediate = {
		s:STATE_CALIFORNIA.region_state:USA = {
			save_scope_as = california_scope
		}
		set_global_variable = usfp_gold_mountain
		c:CHI = {
			save_scope_as = china_scope
		}
		cu:han = {
			save_scope_as = han_scope
		}
	}

	#yes good
	option = {
		name = usfp_manifest_destiny.10.a
		default_option = yes
		scope:california_scope = {
			add_modifier = {
				name = usfp_gold_rush_lawlessness
				years = 3
			}
		}
		custom_tooltip = {
			text = usfp_manifest_destiny.10.a.t
			trigger_event = usfp_manifest_destiny.11
		}
	}

	#no bad
	option = {
		name = usfp_manifest_destiny.10.b
		scope:california_scope = {
			add_modifier = {
				name = usfp_gold_rush_lawlessness
				years = 3
			}
		}
		custom_tooltip = {
			text = usfp_manifest_destiny.10.a.t
			trigger_event = usfp_manifest_destiny.11
		}
	}
}

#Hidden event to handle Chinese arrivals to California, since vanilla game mechanics make this impossible otherwise
usfp_manifest_destiny.11 = {
	type = country_event
	hidden = yes

	immediate = {
		scope:california_scope = {
			create_pop = {
				culture = han
				size = 4000
			}
			if = {
				limit = { 
					game_date < 1853.1.1
				}
				owner = {
					trigger_event = {
						id = usfp_manifest_destiny.11
						months = 1
					}
				}
			}
		}
		
	}
}

#California Genocide
usfp_manifest_destiny.12 = {
	type = country_event
	placement = scope:california_scope

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	title = usfp_manifest_destiny.12.t
	desc = usfp_manifest_destiny.12.d
	flavor = usfp_manifest_destiny.12.f
	dlc = dlc_usfp
	duration = 3

	trigger = {
		any_scope_state = {
			state_region = s:STATE_CALIFORNIA
			is_incorporated = yes
		}
		NOT = {
			has_variable = california_genocide
		}
	}

	immediate = {
		set_variable = california_genocide
		s:STATE_CALIFORNIA.region_state:USA = {
			save_scope_as = california_scope
		}
		cu:hokan = {
			save_scope_as = hokan_scope
		}
	}

	#Okay
	option = {
		name = usfp_manifest_destiny.12.a
		default_option = yes
		scope:california_scope = {
			add_culture_standard_of_living_modifier = {
				culture = cu:hokan
				multiplier = -8
			}
			add_radicals_in_state = {
				value = 0.50
				culture = cu:hokan
			}
			kill_population_percent_in_state = {
				percent = 0.20
				culture = cu:hokan
			}
		}
		s:STATE_CALIFORNIA = {
			every_scope_state = {
				limit = {
					owner = {
						is_country_type = decentralized
					}
				}
				owner = {
					change_tension = {
						country = c:USA
						value = 30
					}
				}
			}
		}
	}
	#Bastards!
	option = {
		name = usfp_manifest_destiny.12.b
		scope:california_scope = {
			add_culture_standard_of_living_modifier = {
				culture = cu:hokan
				multiplier = -4
			}
			add_radicals_in_state = {
				value = 0.25
				culture = cu:hokan
			}
			add_radicals_in_state = {
				value = 0.2
				culture = cu:yankee
			}
			kill_population_percent_in_state = {
				percent = 0.15
				culture = cu:hokan
			}
		}
	}
}

#hidden event to add american homelands where relevant
usfp_manifest_destiny.13 = {
	type = country_event
	hidden = yes

	trigger = {
		any_scope_state = {
			OR = {
				usfp_american_west_zone = yes
				usfp_mexican_cession_trigger = yes
				#in case of manifesting extra destiny
				state_region = s:STATE_RIO_GRANDE
				state_region = s:STATE_CHIHUAHUA
				state_region = s:STATE_SONORA
				state_region = s:STATE_BAJA_CALIFORNIA
			}
			NOR = {
				cu:yankee = {
					has_homeland = prev
				}
				cu:dixie = {
					has_homeland = prev
				}
			}
			is_split_state = no
			state_population > 60000
			religion_percent_state = {
				target = rel:animist
				value < 0.2
			}
		}
	}

	immediate = {
		random_scope_state = {
			limit = {
				OR = {
					usfp_american_west_zone = yes
					usfp_mexican_cession_trigger = yes
					#in case of manifesting extra destiny
					state_region = s:STATE_RIO_GRANDE
					state_region = s:STATE_CHIHUAHUA
					state_region = s:STATE_SONORA
					state_region = s:STATE_BAJA_CALIFORNIA
				}
				NOR = {
					cu:yankee = {
						has_homeland = prev
					}
					cu:dixie = {
						has_homeland = prev
					}
				}
				is_split_state = no
				state_population > 60000
				religion_percent_state = {
					target = rel:animist
					value < 0.2
				}
			}
			save_scope_as = new_homeland_state
		}
		scope:new_homeland_state = {
			if = {
				limit = { 
					OR = {
						state_region = s:STATE_ARIZONA
						state_region = s:STATE_CHIHUAHUA
						state_region = s:STATE_RIO_GRANDE
						state_region = s:STATE_SONORA
						state_region = s:STATE_OKLAHOMA
						state_region = s:STATE_NEW_MEXICO
					}
				}
				state_region = {
					add_homeland = cu:dixie
				}
				cu:dixie = {
					save_scope_as = new_homeland_culture
				}
			}
			else = {
				state_region = {
					add_homeland = cu:yankee
				}
				cu:yankee = {
					save_scope_as = new_homeland_culture
				}
			}
		}
		post_notification = usfp_new_american_homeland
	}
}

#Ostend Manifesto
usfp_manifest_destiny.14 = {
	type = country_event
	placement = root

	event_image = {
		video = "votp_conspiring"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	title = usfp_manifest_destiny.14.t
	desc = usfp_manifest_destiny.14.d
	flavor = usfp_manifest_destiny.14.f
	dlc = dlc_usfp
	duration = 3

	trigger = {
		NOT = {
			has_variable = ostend_manifesto
		}
		ig:ig_landowners = {
			is_marginal = no
			has_ideology = ideology:ideology_pro_slavery
		}
		game_date > 1854.1.1
		var:manifest_destiny_var >= 3
		NOT = {
			owns_entire_state_region = STATE_CUBA
		}
		NOT = {
			any_subject_or_below = {
				owns_entire_state_region = STATE_CUBA
			}
		}
		OR = {
			NOT = {
				exists = c:CUB
			}
			c:CUB = {
				is_subject = yes
			}
		}
	}

	immediate = {
		set_variable = ostend_manifesto
		s:STATE_CUBA = {
			random_scope_state = {
				limit = {
					NOT = {
						owner = c:USA
					}
					is_incorporated = yes
					is_treaty_port = no
				}
				owner = {
					if = {
						limit = { 
							is_subject = yes
						}
						overlord = {
							save_scope_as = cuba_owner_scope
						}
					}
					else = {
						save_scope_as = cuba_owner_scope
					}
				}
			}
			save_scope_as = cuba_scope
		}
	}

	#Let's not
	option = {
		name = usfp_manifest_destiny.14.a
		default_option = yes
		custom_tooltip = cuba_offer_available
		create_incident = {
			country = scope:cuba_owner_scope
			value = 5
		}
	}
	#Good idea
	option = {
		name = usfp_manifest_destiny.14.b
		trigger = {
			any_scope_politician = {
				OR = {
					interest_group = {
						is_in_government = yes
					}
					is_ruler = yes
				}
				usfp_manifest_destiny_pro_expansion_trigger = yes
			}
		}
		highlighted_option = yes
		custom_tooltip = cuba_offer_available
		usfp_manifest_more_destiny_effect = yes
		create_incident = {
			country = scope:cuba_owner_scope
			value = 10
		}
	}
	#Rivalry with spain
	option = {
		name = usfp_manifest_destiny.14.c
		trigger = {
			has_diplomatic_pact = {
				who = scope:cuba_owner_scope
				type = rivalry
			}
		}
		highlighted_option = yes
		usfp_manifest_more_destiny_effect = yes
		create_incident = {
			country = scope:cuba_owner_scope
			value = 30
		}
		s:STATE_CUBA = {
			add_claim = root
		}
	}
	#Bad idea
	option = {
		name = usfp_manifest_destiny.14.e
		trigger = {
			any_scope_politician = {
				OR = {
					interest_group = {
						is_in_government = yes
					}
					is_ruler = yes
				}
				usfp_manifest_destiny_anti_expansion_trigger = yes
			}
		}
		highlighted_option = yes
		custom_tooltip = cuba_offer_available
		usfp_manifest_less_destiny_effect = yes
		ig:ig_landowners = {
			add_modifier = {
				name = usfp_abandoned_cuba
				months = short_modifier_time
			}
		}
		every_interest_group = {
			limit = {
				NOT = {
					is_interest_group_type = ig_landowners
				}
				leader = {
					usfp_manifest_destiny_pro_expansion_trigger = yes
				}
			}
			add_modifier = {
				name = usfp_abandoned_cuba
				months = short_modifier_time
			}
		}
	}
}

#Cuba overlord: offer to buy Cuba
usfp_manifest_destiny.15 = {
	type = country_event
	placement = scope:cuba_state_scope

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag_usa.dds"
	
	title = usfp_manifest_destiny.15.t
	desc = usfp_manifest_destiny.15.d
	flavor = usfp_manifest_destiny.15.f
	dlc = dlc_usfp
	duration = 3

	immediate = {
		c:USA = {
			save_scope_as = usa_scope
		}
		s:STATE_CUBA = {
			save_scope_as = cuba_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_CUBA
			}
			save_scope_as = cuba_state_scope
		}
	}

	#Accept
	option = {
		name = usfp_manifest_destiny.15.a
		c:USA = {
			change_relations = {
				country = ROOT
				value = 25
			}
			trigger_event = {
				id = usfp_manifest_destiny.17
				days = 7
				popup = yes
			}
		}
		show_as_tooltip = {
			add_modifier = {
				name = usa_paying_for_cuba
				years = 4
			}
			c:MEX = {
				add_modifier = {
					name = spain_getting_paid_by_usa
					years = 4
				}
			}
			every_scope_state = {
				limit = {
					state_region = s:STATE_CUBA
				}
				set_state_owner = c:USA
			}
		}
		ai_chance = {
			base = 5
			modifier = {
				trigger = {
					taking_loans = yes
				}
				add = 10
			}
			modifier = {
				trigger = {
					OR = {
						in_default = yes
						has_modifier = declared_bankruptcy
					}
				}
				add = 100
			}
		}
	}
	#Refuse
	option = {
		name = usfp_manifest_destiny.15.b
		default_option = yes
		ai_chance = {
			base = 100
		}
		c:USA = {
			change_relations = {
				country = ROOT
				value = -10
			}
			trigger_event = {
				id = usfp_manifest_destiny.16
				days = 7
			}
		}
	}


}

#Cuban overlord refuses
usfp_manifest_destiny.16 = {
	type = country_event
	placement = ROOT

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	title = usfp_manifest_destiny.16.t
	desc = usfp_manifest_destiny.16.d
	flavor = usfp_manifest_destiny.16.f
	dlc = dlc_usfp
	duration = 3

	immediate = {
		s:STATE_CUBA = {
			random_scope_state = {
				limit = {
					NOT = {
						owner = c:USA
					}
				}
				owner = {
					if = {
						limit = { 
							is_subject = yes
						}
						overlord = {
							save_scope_as = cuba_owner_scope
						}
					}
					else = {
						save_scope_as = cuba_owner_scope
					}
				}
			}
			save_scope_as = cuba_scope
		}
	}

	#can't try again
	option = {
		name = usfp_manifest_destiny.16.a
		ig:ig_landowners = {
			add_modifier = {
				name = usfp_abandoned_cuba
				months = short_modifier_time
			}
		}
	}

	#gibs me your island
	option = {
		name = usfp_manifest_destiny.16.b
		s:STATE_CUBA = {
			add_claim = c:USA
		}
		create_incident = {
			country = scope:cuba_owner_scope
			value = 20
		}
		if = {
			limit = { 
				exists = c:CUB
				c:CUB = {
					has_attitude = {
						who = scope:cuba_owner_scope
						attitude = loyal
					}
				}
			}
			change_relations = {
				country = c:CUB
				value = -50
			}
		}
	}

}

#Cuban overlord accepts
usfp_manifest_destiny.17 = {
	type = country_event
	placement = ROOT

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	title = usfp_manifest_destiny.17.t
	desc = usfp_manifest_destiny.17.d
	flavor = usfp_manifest_destiny.17.f
	dlc = dlc_usfp
	duration = 3

	immediate = {
		s:STATE_CUBA = {
			random_scope_state = {
				limit = {
					NOT = {
						owner = c:USA
					}
				}
				owner = {
					if = {
						limit = { 
							is_subject = yes
						}
						overlord = {
							save_scope_as = cuba_owner_scope
						}
					}
					else = {
						save_scope_as = cuba_owner_scope
					}
				}
			}
			save_scope_as = cuba_scope
		}
	}

	#Annex
	option = {
		name = usfp_manifest_destiny.17.a
		usfp_manifest_less_destiny_effect = yes
		add_modifier = {
			name = usa_paying_for_cuba
			years = 30
		}
		scope:cuba_owner_scope = {
			add_modifier = {
				name = spain_getting_paid_by_usa
				years = 30
			}
		}
		s:STATE_CUBA = {
			every_scope_state = {
				limit = {
					OR = {
						owner = scope:cuba_owner_scope
						owner = c:CUB
					}
				}
				set_state_owner = c:USA
			}
		}
	}
}

#Monroe Doctrine Violation
usfp_manifest_destiny.18 = {
	type = country_event
	placement = ROOT

	event_image = {
		video = "votp_gunboat_diplomacy"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	title = usfp_manifest_destiny.18.t
	desc = usfp_manifest_destiny.18.d
	flavor = usfp_manifest_destiny.18.f
	dlc = dlc_usfp
	duration = 3

	cooldown = {
		years = 1
	}

	trigger = {
		any_diplomatic_play = {
			target = {
				OR = {
					country_is_in_north_america = yes
					country_is_in_central_america = yes
					country_is_in_south_america = yes
				}
				has_diplomatic_relevance = ROOT
				NOT = {
					this = ROOT
				}
				is_revolutionary = no
			}
			initiator = {
				country_is_in_north_america = no
				country_is_in_central_america = no
				country_is_in_south_america = no
				NOT = {
					this = ROOT
				}
				is_revolutionary = no
			}
			NOR = {
				is_diplomatic_play_type = dp_reduce_autonomy
				is_diplomatic_play_type = dp_increase_autonomy
				is_diplomatic_play_type = dp_secession
			}
		}
	}

	immediate = {
		random_diplomatic_play = {
			limit = {
				target = {
					OR = {
						country_is_in_north_america = yes
						country_is_in_central_america = yes
						country_is_in_south_america = yes
					}
					has_diplomatic_relevance = ROOT
					NOT = {
						this = ROOT
					}
					is_revolutionary = no
				}
				initiator = {
					country_is_in_north_america = no
					country_is_in_central_america = no
					country_is_in_south_america = no
					NOT = {
						this = ROOT
					}
					is_revolutionary = no
				}
				NOR = {
					is_diplomatic_play_type = dp_reduce_autonomy
					is_diplomatic_play_type = dp_increase_autonomy
					is_diplomatic_play_type = dp_secession
				}
			}
			target = {
				save_scope_as = target_scope
			}
			initiator = {
				save_scope_as = initiator_scope
			}
		}
	}

	#Intervene!
	option = {
		name = usfp_manifest_destiny.18.a
		trigger = {
			naval_power_projection >= 80
		}
		default_option = yes
		if = {
			limit = {
				NOT = {
					has_variable = destiny_manifested_monroe_doctrine
				}
			 }
			 set_variable = destiny_manifested_monroe_doctrine
			 usfp_manifest_more_destiny_effect = yes
		}
		change_relations = {
			country = scope:target_scope
			value = 30
		}
		change_relations = {
			country = scope:initiator_scope
			value = -30
		}
	}
	#Don't care
	option = {
		name = usfp_manifest_destiny.18.b
		add_modifier = {
			name = usfp_ignored_monroe_modifier
			years = 2
		}
		ig:ig_armed_forces = {
			add_modifier = {
				name = usfp_ignored_monroe
				years = 2
			}
		}
		every_interest_group = {
			limit = {
				NOT = {
					is_interest_group_type = ig_armed_forces
				}
				leader = {
					usfp_manifest_destiny_pro_expansion_trigger = yes
				}
			}
			add_modifier = {
				name = usfp_ignored_monroe
				years = 2
			}
		}
		change_relations = {
			country = scope:target_scope
			value = -10
		}
	}
	#Our navy is too weak
	option = {
		name = usfp_manifest_destiny.18.c
		trigger = {
			naval_power_projection < 80
		}
		highlighted_option = yes
		change_relations = {
			country = scope:target_scope
			value = -10
		}
	}
	#We are preoccupied
	option = {
		name = usfp_manifest_destiny.18.e
		highlighted_option = yes
		trigger = {
			OR = {
				has_insurrectionary_interest_groups = yes
				is_in_civil_war = yes
			}
		}
	}
}